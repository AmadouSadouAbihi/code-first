pool:
  vmImage: ubuntu-latest

steps:
- task: NuGetCommand@2
  displayName: 'Restore nuget packages'

- task: MSBuild@1
  displayName: 'Build the project'

- task: DotNetCoreCLI@2
  displayName: 'Initialize EntityFrameworkCore'
  inputs:
    command: custom
    custom: tool
    arguments: 'install --global dotnet-ef --version 3.0.0-*'
    
- task: DotNetCoreCLI@2
  displayName: 'Create migration'
  inputs:
    command: custom
    custom: ef
    arguments: 'migrations script -i -o migration.sql'
